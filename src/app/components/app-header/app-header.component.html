<ion-header class="app-header">
  <ion-toolbar>
    <!-- Left: Back button or Brand logo -->
    <ion-buttons slot="start">
      @if (showBackButton) {
        <ion-back-button [defaultHref]="defaultHref"></ion-back-button>
      } @else {
        <div class="brand">
          <span class="brand-icon">SC</span>
        </div>
      }
    </ion-buttons>

    <!-- Center: Title -->
    <ion-title>
      {{ pageTitle || 'SearchCraft' }}
    </ion-title>

    <!-- Right: Actions -->
    <ion-buttons slot="end">
      <!-- Install PWA -->
      @if (pwaInstall.shouldShowInstallButton()) {
        <ion-button (click)="handleInstallClick()" aria-label="Install app">
          <ion-icon slot="icon-only" name="download-outline"></ion-icon>
        </ion-button>
      }

      <!-- Theme Toggle -->
      <ion-button (click)="toggleTheme()" [attr.aria-label]="themeLabel">
        <ion-icon slot="icon-only" [name]="themeIcon"></ion-icon>
      </ion-button>

      <!-- History Navigation -->
      @if (!hideHistoryButton) {
        <ion-button (click)="navigateToHistory()" aria-label="Search history">
          <ion-icon slot="icon-only" name="time-outline"></ion-icon>
        </ion-button>
      }

      <!-- Presets Navigation -->
      @if (!hidePresetsButton) {
        <ion-button (click)="navigateToPresets()" aria-label="Saved presets">
          <ion-icon slot="icon-only" name="folder-outline"></ion-icon>
        </ion-button>
      }
    </ion-buttons>
  </ion-toolbar>
</ion-header>
